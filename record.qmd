---
title: "Global Development & Fertility Dynamics"
subtitle: "STAT 184 Final Project â€” Exploratory Data Analysis"
author:
  - name: "Tianyu Duan"
  - name: "Mingqian Li"
date: "Fall 2025"
format:
  pdf:
    toc: true
    number-sections: true
    code-fold: false
    keep-tex: false
fontsize: 11pt
geometry: margin=1in
---

```{r setup, include=FALSE}
# Primary author: Tianyu Duan
# Reviewer: Mingqian Li
# Style guide: Tidyverse Style Guide
library(WDI)
library(dplyr)
library(ggplot2)
library(scales)


knitr::opts_chunk$set(
  echo = FALSE,      # IMPORTANT: keep code out of the report body
  message = FALSE,
  warning = FALSE,
  fig.align = "center",
  fig.width = 7,
  fig.height = 4.5,
  dpi = 300
)
```

```{r data-prep, include=FALSE}
year <- 2018

raw <- WDI(
  country = "all",
  indicator = c(
    fertility = "SP.DYN.TFRT.IN",
    gdp_pc = "NY.GDP.PCAP.CD",
    edu_sec = "SE.SEC.ENRR",
    life_expectancy = "SP.DYN.LE00.IN"
  ),
  start = year,
  end = year,
  extra = TRUE
)

clean <- raw %>%
  select(country, region, fertility, gdp_pc, edu_sec, life_expectancy) %>%
  filter(region != "Aggregates")
```
# Introduction & Research Context

Many countries are worried about the drop in fertility since it slows down population growth, the number of workers, and long-term economic planning. Over the past few decades, birth rates have gone down in many parts of the world, but not in the same way in all of them. Due to these disparities, numerous individuals are intrigued by the potential correlation between family size and the economic and social conditions across various nations.

This study analyzes reproductive trends within the context of a holistic comprehension of development. We don't just think about money when we talk about progress. We also look at the situation of health, education, and the economy. We use 2018 World Bank data on life expectancy, GDP per capita, and secondary school enrollment to see how these things affect the number of births. We want to use exploratory data analysis to talk about major trends, variations between places, and clear patterns in the data. We don't want to know what caused these things to happen.

# Research Questions

This study seeks to examine global fertility patterns among nations through the use of diverse development-related indicators. We are particularly interested in the subsequent inquiries:

- How does the level of GDP per capita affect fertility rates in different countries?
- How do education levels and life expectancy affect fertility rates in different countries?
- Are there clear differences in fertility rates between areas or overall trends around the world?

# Data Provenance

We receive the data for this project from the World Bank's World Development Indicators (WDI) database, which is accessible using the `{WDI}` R package. The World Bank collects these numbers from national statistical offices, international organizations, and procedures that are the same for everyone. The WDI database's purpose is to give individuals around the world comparative country-level measures of social and economic growth.

We are studying countries, and we are only looking at one year (2018) so that we may compare countries without getting affects from time series. The dataset includes countries from different parts of the world, but not from consolidated regions, so that each observation is from a different country.

In our study, we employ these signs:
Fertility rate: the average number of children a woman is expected to have during her lifetime.
- GDP per capita (current US$): This is a measure of how much money each person makes. It is typically used to illustrate how well the economy is performing.
- Secondary school enrollment (gross, %): the percentage of those who are technically of secondary school age who are also in secondary school.
- Life expectancy at birth (years): The average number of years a newborn is expected to live based on the current death rate.

We chose these indicators because they represent diverse parts of development, like health, education, and the economy, that can be related to how people have children in different nations.

# FAIR & CARE Considerations
Most of the data for this project follows the FAIR standards. You can easily find the World Bank's World Development Indicators on the World Bank website and in the `{WDI}` R package. This makes it easy to find and use the data. The indicators are in standard forms, and the meanings of the variables are the same in every country. This makes it easy for systems to talk to each other. The data is also open source and well-documented, so other researchers can use it again to repeat or add on analyses.

According to the CARE standards, the figures are organized by country and don't include any information that could help identify someone.   So, there isn't much to worry about when it comes to safety or privacy.   The World Bank and national statistical organizations work collaboratively to gather and store the information. This means that organizations that are recognized are still in responsible of getting and reporting the data. The purpose of these indicators is to assist individuals learn about and explore public policy, which is in line with the idea of the common good.

At the same time, it's important to know your limits. Country-level statistics may obscure inequalities among nations and may not comprehensively reflect the status of specific demographic groupings.   Because of this, our analysis looks at overall patterns instead of making judgments about individual countries or trying to figure out why things are happening. We wish to use the data in a responsible and moral way by making it obvious and careful.

# Data Preparation
We utilized the `{WDI}` package to get the data directly into R. This software makes it simple for anyone to understand and repeat how to retrieve World Bank World Development Indicators. We acquired data for all the measures we chose for 2018 at the country level.

We only picked the factors that were important to our study after we brought in the data. The country, area, fertility rate, GDP per person, number of secondary school pupils, and life expectancy were all factors. We removed the World Bank's aggregate regions, such as summaries by region or income group, so that each observation in the dataset is for one country.

We didn't use imputation to fill in the gaps in the data; instead, we merely left them out of the pictures. This method keeps assumptions from getting in the way of the exploratory analysis. It was easier to detect overall patterns and compare countries with very different income levels when GDP per capita was shown on a logarithmic scale.

# Exploratory Data Analysis

## GDP per Capita and Fertility
Figure 1 shows how GDP per capita and fertility rates are related in different countries in 2018. Overall, the trend indicates a clear negative relationship: countries with higher GDP per capita tend to have lower fertility rates, whereas those with lower income levels tend to have higher fertility rates. It looks like this tendency is the same in all areas, but the range of fertility rates is much wider in poorer countries.

It looks like there is a clear line at lower levels of GDP per person, notably below $10,000. The number of children born to mothers in this range is very different. Some countries have fewer than two kids for every woman, while others have more than five. When GDP per person climbs over this level, birth rates normally go down and become more closely grouped. This pattern illustrates that the biggest changes in fertility outcomes occurred when the economy is just starting to grow. Changes in income growth, on the other hand, are modest.

```{r fig-gdp-fertility}
#| fig-cap: "GDP per capita vs. fertility rate by country (2018)."
#| fig-alt: "Scatter plot of GDP per capita and fertility rate; points are colored by region; overall negative association."
# Primary author: Mingqian Li
# Reviewer: Tianyu Duan
ggplot(clean, aes(x = gdp_pc, y = fertility, color = region)) +
  geom_point(alpha = 0.7, size = 2) +
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se = FALSE, aes(group = 1), color = "black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (", year, ")"),
    color = "Region"
  )
```

## Secondary Education and Fertility
Figure 2 shows how the number of babies born in different nations in 2018 is linked to the number of people who sign up for high school.       The trend clearly reveals that there is a negative relationship: higher levels of involvement in secondary education are generally linked to lower birth rates. People who go to school a lot are less likely to have babies, while people who don't go to school a lot are more likely to have a lot of infants.

When fewer than 80% of kids move on to secondary school, a clear trend starts to show. During this period, numerous countries experience a significant rise in the birth rate, particularly in Sub-Saharan Africa and certain regions of South Asia. This indicates that access to secondary school is considerably linked to variations in reproductive outcomes, particularly at lower tiers of educational enrollment; nevertheless, this study does not confirm a causal relationship.

```{r fig-edu-fertility}
#| fig-cap: "Secondary education enrollment vs. fertility rate by country (2018)."
#| fig-alt: "Scatter plot of secondary enrollment and fertility rate by region; lower enrollment corresponds to higher fertility in several regions."
# Primary author: Mingqian Li
# Reviewer: Tianyu Duan

ggplot(clean, aes(x = edu_sec, y = fertility, color = region)) +
  geom_point(alpha = 0.7, size = 2) +
  geom_smooth(method = "lm", se = FALSE, aes(group = 1), color = "black") +
  labs(
    title = paste("Secondary Education Enrollment vs Fertility Rate by Country (", year, ")"),
    color = "Region"
  )
```

## Life Expectancy and Fertility
Figure 3 shows how life expectancy and birth rates were related in different countries in 2018. There is a clear negative relationship: countries with longer life expectancies tend to have lower fertility rates, whereas those with shorter life expectancies tend to have greater fertility rates. It seems like this link is smoother than the ones between GDP and education, with fewer major outliers.

At 75, a clear pattern begins to emerge. Fertility rates below this threshold can change a lot.  Some women have less than two kids, while others have more than five. A lot of these countries are in Sub-Saharan Africa, where people live shorter lives and have more kids. Above this level, fertility rates often stay low and don't change much. This trend demonstrates a significant correlation between enhancements in population health and variations in fertility rates among countries; however, this research does not establish causation.

```{r fig-life-fertility}
#| fig-cap: "Life expectancy vs. fertility rate by country (2018)."
#| fig-alt: "Scatter plot of life expectancy and fertility rate; higher life expectancy generally corresponds to lower fertility."
# Primary author: Tianyu Duan
# Reviewer: Mingqian Li

ggplot(clean, aes(x = life_expectancy, y = fertility, color = region)) +
  geom_point(alpha = 0.7, size = 2) +
  geom_smooth(method = "lm", se = FALSE, aes(group = 1), color = "black") +
  labs(
    title = paste("Life Expectancy vs Fertility Rate by Country (", year, ")"),
    color = "Region"
  )
```

## Regional Patterns
The preceding sections looked at worldwide patterns, but looking at areas separately makes it easier to see how fertility and development indicators change in similar situations. Countries that are close to one other frequently have similar histories, economies, and ways of life.   These factors may influence reproduction rates in ways that are not readily discernible when examining the global context.

Figure 4 shows the countries in Sub-Saharan Africa. This area has always had greater birth rates than the rest of the world, even when GDP per person is the same. Fertility rates differ a lot in this area, especially in countries with lower incomes. This geographical viewpoint shows that, even though development indicators and reproduction are still negatively correlated, the number and spread of fertility results are very different in different areas. These discrepancies show that where you live has a large impact on reproduction trends. This may help explain some of the differences reported in studies around the world.

```{r fig-region-example}
#| fig-cap: "Example regional pattern (replace with your region-specific figure)."
#| fig-alt: "Scatter plot within a single region showing the relationship between GDP per capita and fertility rate."
# Primary author: Tianyu Duan
# Reviewer: Mingqian Li
sub_saharan_africa <- clean %>%
  filter(region == "Sub-Saharan Africa")

ggplot(sub_saharan_africa, aes(x = gdp_pc, y = fertility)) +
  geom_point(alpha = 0.7, size = 2) +
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se = FALSE, color = "black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate (Sub-Saharan Africa,", year, ")"),
    x = "GDP per Capita (log scale)",
    y = "Fertility Rate"
  )
```

## Region part East Asia & Pacific
The scatter plots below show the relationship between GDP per person and the fertility rate for countries in East Asia and the Pacific in the year chosen. The GDP per capita is shown on a logarithmic scale to highlight how wide the economic inequalities are between countries. Each point stands for a different country.

Overall, the graphs demonstrate a clear negative relationship between the fertility rate and GDP per capita. People with higher incomes tend to have fewer children, while people with lower GDP per capita tend to have more children. This pattern is supported by the fitted linear regression line, which goes down.

This pattern could be caused by inequalities in access to education, healthcare, and family planning, as well as differences in how fast cities are growing and the economy is growing in the area. As countries develop wealthy, families usually choose to have fewer kids since living costs more and they want to send their kids to school and work more.

```{r fig-region-eap}
east_asia_pacific <- clean %>%
  filter(region == "East Asia & Pacific")
europe_cental_asia <- clean %>%
  filter(region == "Europe & Central Asia")
latin_america_caribbean <- clean %>%
  filter(region == "Latin America & Caribbean")
middle_east_north_africa <- clean %>%
  filter(region == "Middle East & North Africa")
sub_saharan_africa <- clean %>%
  filter(region == "Sub-Saharan Africa")

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )

# East Asia & Pacific trend
ggplot(east_asia_pacific, aes(x=gdp_pc, y=fertility)) +
  geom_point(alpha=0.7,size=2) + 
  scale_x_log10(labels = scales::label_comma()) +
  geom_smooth(method = "lm", se=FALSE, color="black") +
  labs(
    title = paste("GDP per Capita vs Fertility Rate by Country (East Asia & Pacific,",year,")"),
    color = "Continent / Region"
  )
```

# Key Insights (What We Learned So Far)
- Insight 1: Countries with higher GDP per capita tend to have lower fertility rates. The most significant disparities in fertility are evident in lower-income nations, especially those with a GDP per capita of less than $10,000 (Figure 1).

 - Insight 2: More students enrolling in secondary school is linked to decreased birth rates. Countries with enrollment rates below about 80% have a lot more variety and usually higher fertility, notably in Sub-Saharan Africa (Figure 2).

 - Insight 3: There is a strong negative link between life expectancy and fertility. Countries with a life expectancy of less than 75 years have quite different fertility rates, while countries with a life expectancy of more over 75 years tend to have low fertility rates throughout the time (Figure 3).

 - Insight 4: Looking at regions shows major differences that aren't as clear when looking at the whole world. Fertility rates in Sub-Saharan Africa are still high across all income levels, and the differences across countries in the region are more than in many other regions (Figure 4).

# Challenges & Limitations
There are some problems with this exploratory analysis. Some countries don't have numbers for some variables, which means there are fewer observations to look at and the patterns in the data may not be as clear. We decided not to fill in the blanks since we didn't want to make any more guesses.

Second, even though the World Bank gives forth standardized metrics, variances in how countries gather and show data can lead to wrong measurements. Consequently, we must exercise caution when comparing nations.

This study used exploratory data analysis, which aims to identify patterns and connections rather than determine causal relationships.    The data show that there are clear links between fertility and factors related to development. However, this doesn't suggest that changes in GDP, education, or life expectancy directly drive changes in fertility.

# Conclusion & Future Questions
This study examined data from the World Bank to see how fertility rates fluctuate from one country to the next. Countries with higher GDP per capita, increased secondary school enrollment, and extended life expectancies typically have lower birth rates. These patterns, however, are not consistent across all regions; regional inequalities greatly affect fertility results.

This analysis also brings up a lot of problems that need to be looked into more. It could be better to look at how fertility and development indicators change over time instead of just one year. Another method to look at differences in fertility rates between countries is to include extra factors, such as women's access to healthcare or involvement in the workforce.

# References
@misc{worldbank_wdi,
  title        = {World Development Indicators},
  author       = {{World Bank}},
  year         = {2018},
  url          = {https://databank.worldbank.org/source/world-development-indicators},
  note         = {Accessed via the WDI R package}
}

# Author Contributions
- Tianyu: Helped with the research design, figuring out what the data meant, and writing the parts that came before the data, the data's source, and the conclusion. he also looked at the numbers and told us what he felt of the story and the research.
- Mingqian: Helped with getting data, cleaning it up, doing exploratory data analysis, and making graphs and charts. he was also in charge of putting the report together as a whole and authoring the parts about data analysis.

# Code Appendix

> **All code belongs here.**

```{r codeAppend, ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}
# This chunk will collect and print all code chunks as an appendix in the rendered PDF.
```
